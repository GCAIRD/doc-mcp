version: "3.8"

# 开发环境覆盖配置
# 使用: docker compose -f docker-compose.yml -f docker-compose.dev.yml up

services:
  qdrant:
    ports:
      - "6333:6333"  # 开发时暴露Qdrant端口
      - "6334:6334"  # gRPC
    networks:
      - internal
      - external

  rag-service:
    ports:
      - "8888:8888"  # 开发时暴露RAG服务
    environment:
      - LOG_FORMAT=text  # 开发时用文本格式
    volumes:
      - ./src:/app/src:ro  # 代码只读挂载（热重载需要额外配置）
      - ./scripts:/app/scripts:ro
    networks:
      - internal
      - external

  mcp-server:
    environment:
      - LOG_FORMAT=text
