# Forguncy Chinese Documentation Configuration
lang: zh
company: GrapeCity
company_short: GC
doc_language: zh

collection: forguncy_zh
raw_data: cn/forguncy

npm_scope: ''
cdn_domain: ''

description: 活字格 (Forguncy) 插件开发 SDK，中文文档（.NET + Java 双语言支持）

resources:
  plugin_creation_workflow:
    name: 插件项目创建工作流
    description: AI Agent 创建活字格插件项目的完整编排流程。当用户要求创建新插件时，必须先读取此工作流。
    mimeType: text/plain
    content: |
      # 活字格插件项目创建工作流（Agent 编排指南）

      此文档指导你（AI Agent）如何一站式帮用户完成插件项目创建。
      核心原则：提前收集所有信息，一次性生成，不要让用户手动操作构建器 GUI。

      ═══ Phase 1: 信息收集（一次性问完）═══

      向用户确认以下信息，可以合并为一次提问：

      1. 【项目名称】默认 "MyForguncyPlugin"
      2. 【开发语言】.NET 还是 Java？（默认 .NET）
      3. 【插件类型】需要哪些？（根据语言约束提示可选项）
         - .NET 可选：CellType, Command, ServerCommand, ServerApi, Middleware
         - Java 可选：ServerCommand, ServerApi(WebAPI), SecurityProvider
         - 若用户要求 Java + CellType/Command/Middleware → 告知不支持，建议 .NET
      4. 【插件用途】一句话描述业务目标（用于生成代码注释和 DisplayName）
      5. 【Logo】是否需要？如需要：图标风格（text/gantt/chart/db/gear）+ 2-3个字符
      6. 【额外依赖】是否需要 Newtonsoft.Json 或其他 NuGet/Maven 包？

      不需要问活字格安装路径——仅在编译报错时才需要，届时再问。

      ═══ Phase 2: 项目骨架生成 ═══

      ── .NET 路径 ──
      1. 用 search 工具查询 "快速开始" 获取最新项目结构参考
      2. 用 search 工具查询对应插件类型的模板（如 "ServerCommand 基本结构"）
      3. 创建项目目录结构：
         {ProjectName}/
         ├── {ProjectName}.sln
         ├── {ProjectName}/                    # 客户端项目
         │   ├── {ProjectName}.csproj
         │   ├── PluginConfig.json
         │   └── Resources/
         └── {ProjectName}.Server/             # 服务端项目（如需 ServerCommand/ServerApi/Middleware）
             └── {ProjectName}.Server.csproj
      4. 用 search 查询 "PluginConfig.json" 了解配置格式
      5. 写入 .csproj 文件（引用 GrapeCity.Forguncy SDK）
      6. 写入 PluginConfig.json（注册选定的插件类型）
      7. 写入模板代码文件（根据用户选择的插件类型）
      8. 如需额外依赖：运行 `dotnet add package {PackageName}`

      ── Java 路径 ──
      1. 用 search 工具查询 "Java ServerCommand 快速入门" 或 "Java Web API 基本介绍"
      2. 创建 Maven 项目结构：
         {ProjectName}/
         ├── pom.xml
         └── src/main/java/org/example/
             └── {ClassName}.java
      3. 写入 pom.xml（Spring Boot 2.7.18 + Forguncy Java SDK 依赖）
      4. 写入模板 Java 文件（ServerCommand 或 ForguncyApi 子类）

      ═══ Phase 3: 资产生成 ═══

      如果用户要求 Logo：
      - 生成 SVG（64x64，蓝色渐变背景 + 白色图标/文字）
      - 生成 PNG（128x128，用于 PluginConfig.json 主图标）
      - 放入 Resources/ 目录
      - 更新 PluginConfig.json 中的图标路径

      ═══ Phase 4: 验证 ═══

      1. 检查项目结构完整性（.csproj/.pom.xml 存在、引用正确）
      2. 检查 PluginConfig.json 与代码文件的一致性
      3. 告知用户下一步操作：
         - .NET："用 VS2022 打开 .sln，生成→生成解决方案"
         - Java："用 IntelliJ 打开项目目录，运行 mvn install"

      ═══ Phase 5: 功能开发（后续对话）═══

      项目创建完成后，用户会要求实现具体业务逻辑。此时：
      1. 用 search 查询对应插件类型的详细文档
      2. 严格遵守 instructions 中的编码规范
      3. 所有 [DisplayName] 使用中文
      4. 每次修改代码后，检查 PluginConfig.json 是否需要同步更新

  dotnet_project_reference:
    name: .NET 插件项目参考
    description: .NET 插件项目的环境要求、项目结构和构建方式速查。
    mimeType: text/plain
    content: |
      # .NET 插件项目参考

      环境：Visual Studio 2022 + .NET 桌面开发工作负载（Windows 10 1909+）
      构建器：ForguncyPluginCreator.exe（Gitee: forguncyPluginBuilder，备选方案）

      项目结构（双项目模式）：
        {Name}.sln
        ├── {Name}/              → 客户端（CellType C# 属性 + Command 定义 + JS 交互代码）
        │   ├── {Name}.csproj    → 引用 GrapeCity.Forguncy.CellTypes
        │   └── PluginConfig.json
        └── {Name}.Server/       → 服务端（ServerCommand + ServerApi + Middleware）
            └── {Name}.Server.csproj → 引用 GrapeCity.Forguncy.ServerApi

      支持类型：CellType, Command, ServerCommand, ServerApi, Middleware
      编译产出：bin/ 目录下 .zip 插件包
      热更新：JS 改后刷新页面；C# 改后重启设计器
      调试：JS→F12 | C# 设计时→VS 附加进程 | ServerCommand→Logger 诊断日志

  java_project_reference:
    name: Java 插件项目参考
    description: Java 插件项目的环境要求、项目结构和构建方式速查。
    mimeType: text/plain
    content: |
      # Java 插件项目参考

      环境：JDK 21 + IntelliJ IDEA + Maven
      生成器：forguncyJavaExtensionGenerateTool（Gitee，备选方案）

      项目结构（Maven 标准）：
        {Name}/
        ├── pom.xml              → Spring Boot 2.7.18 + Forguncy Java SDK
        └── src/main/java/org/example/
            └── {ClassName}.java

      支持类型：ServerCommand, ServerApi(WebAPI), SecurityProvider
      不支持：CellType, Command, Middleware
      编译命令：mvn install
      编译产出：target/custom-api-1.0.0-jar-with-dependencies.fgcjwa.zip
      部署方式：设计器 → 设置 → 自定义 Web API → 上传
      调试：Remote JVM Debug（设计器 → Java 调试端口 → IntelliJ 远程调试）
      日志：%Temp%\ForguncyDesignerLog\ForguncyJavaAdapter
      注意：依赖冲突用 <scope>provided</scope> 排除
